---
layout: default
title: 일반 OSI 참조 모델 관련 이슈와 개념
parent: TCP/IP
nav_order: 3
---

# 일반 OSI 참조 모델 관련 이슈와 개념

## 핵심 OSI 참조 모델 개념

### OSI 참조 모델 네트워킹 계층, 하위 계층, 계층 그룹

OSI 참조 모델은 1에서 7까지의 번호가 할당되어 있는 7개의 개념적 계층으로 구성돼 있다.

계층 번호는 모델 전체에서의 계층 위치를 나타내며, 계층이 실제 네트워크를 구현하는 하드웨어와 얼마나 가까이 있는지를 알려 준다.

1계층에서 7계층까지 따라가 보면 계층 스택을 올라갈 떄마다 추상화 수준이 증가함을 알 수 있다.

OSI 참조 모델은 공식적으로 연관 계층들의 그룹을 할당하지 않는다.

하지만 계층 동작 방식을 좀더 쉽게 이해하기 위해 전체 계층을 두 그룹으로 분류할 수 있다.

* 하위 계층(계층 1, 2, 3, 4)
> 물리, 데이터 링크, 네트워크, 전송 은 주로 네트워크에서 데이터를 포매팅 하고, 인코딩 하고, 전송하는 것을 다룬다. 이들은 단지 데이터를 전송하는 데만 관심이 있다.

* 상위 계층(계층 5, 6, 7)
>주로 사용자와 네트워크에서 운영되는 애플리케이션 구현을 다룬다. 이들은 거의 모든 경우에 컴퓨터나 하드웨어 장비에서 동작하는 소프트웨어로 구현된다.

![OSI 참조 모델 계층](http://www.a24s.com/data/jeongbotongsinhakseub/jbts/images/p26.jpg)

출처 : [a24s](http://www.a24s.com/data/jeongbotongsinhakseub/jbts/contents/ch2-4.htm)

때때로 프로토콜이 이들 계층의 2또는 3계층에 걸쳐 있는 경우가 있다. 특히 TCP/IP 애플리케이션 프로토콜에서 이 현상이 자주 일어난다.

이는 TCP/IP 모델이 OSI의 5에서 7계층까지를 하나의 계층으로 다루기 때문이다.

### N 표기법과 기타 OSI 모델 계층 용어

* 계층 이름과 번호
    
    OSI 참조 모델의 다양한 계층은 데이터 링크 계층, DLL, L2, 2계층 등으로 다양하게 불린다.

* N 표기법

    N은 일반적으로 숫자를 언급하는 데 쓰인다. 이 문자는 특정 계층을 언급하지않고 일반적인 개별 게층을 언급할 때 쓰인다.

* 프로토콜과 인터페이스

    OSI 모델의 문맥에서 특수한 의미를갖는다. 프로토콜은 OSI 모델의 동일 계층에서 논리적 또는 물리적 장비 간의 통신을 나타낸다. 인터페이스는 동일 장비의 인접 계층 간에 이동하는 정보를 나타낸다.

* 네트워크 스택

    모델의 전체 계층 또는 기술 모음을 언급하는 데 쓰인다.

* 실체, 기능, 설비, 서비스

    이들은 모델의 여러 계층에서 수행되는 작업을 언급하는 데 쓰이는 약간 애매한 용어로 서로 혼용되어 쓰인다.

### 인터페이스 : 수직 (인접 계층) 통신
    
    OSI 모델 계층에서 쓰이는 인터페이스는 데이터가 N계층과 N+1 계층 사이, 또는 N계층과 N-1 계층 사이 전달되는 절차를 의미한다.

### 프로토콜 : 수평적 (대응 계층) 통신

    5계층에서 5계층으로 통신을 하게되면, 송신 머신의 데이터가 1계층으로 전달되어야 한다.

    1계층까지 도달한 데이터는 물리적 회선을 타고 다른 머신의 1계층까지 이동한다음 프로토콜 스택을 거슬러 올라가 5계층까지 도달해야 한다.

![OSI 7계층](https://t1.daumcdn.net/cfile/tistory/201C443C4F6C38982D)

출처 : [Alpon's](http://noxking007.tistory.com/entry/OSI-7-%EA%B3%84%EC%B8%B5)

### 데이터 캡슐화, 프로토콜 데이터 유닛, 서비스 데이터 유닛

* PUD(Protocol Data Unit) : 특정 계정 프로토콜을 구현하는 완전한 메시지

* SDU(Service Data Unit) : PDU가 N-1 계층으로 전달될 경우, N-1 프로토콜이 서비스를 제공해야 할 데이터


N-1 계층은 N계층에서 온 SDU를 자신의 PDU 포맷에 맞게 위치시키고, 푸터와 헤더를 삽입해 자신의 PDU를 만든다.

이 절차를 **데이터 캡슐화** 라고 부른다.

이 과정이 계속되어 물리 계층까지 도달하게 되면 물리적 비트 신호로 변환되어 전송된다.

![OSI 참조 모델 데이터 캡슐화](http://2.bp.blogspot.com/-Nc5D_3jT6ew/TuX1U5TvKmI/AAAAAAAAAD0/UgB07gtBvCw/s400/Cc977591.CNFH02%2528en-us%252CTechNet.10%2529.gif)

출처 : [pharoah](http://pharoah-net.blogspot.com/2011/12/osi-model.html)

### 간접 장비 연결과 메시지 라우팅

    메시지가 같은 네트워크에 있지 않는 장비 사이에서 전송되려면 최종 목적지에 도달하기 전에 중간에있는 네트워크들을 거쳐야 한다.

* 포워딩

    한 네트워크에 있는 메시지를 다른 네트워크로 보내는 과정

* 라우팅

    한 장비에서 다른 장비로 포워딩하는 종합적인 과정


머신의 상위 수준 애플리케이션은 원격지 컴퓨터에 데이터그램을 보내고자 한다.

* 데이터그램의 목적지 주소는 최종 목적지 장비의 주소로 설정돼있다.

* 하지만 하위 계층으로 전달되는 메시지는 로컬 네트워크에 있는 다른 머신이 아니라 중간 장비로 전달되도록 패키징된다.

* 중간 장비(라우터)는 물리 계층에서 메시지를 받는다.

* 메시지는 데이터 링크로 전달되며 에러 검사 등을 거친 뒤 데이터 링크 계층 헤더가 제거 된다.

* 남은 데이터가 네트워크 계층으로 전달된다.

* 중간 장비는 최종 목적지 머신이 로컬 네트워크에 있는지, 다른 중간 장비로 포워딩 되어야 하는지를 판단한다.

* 중간 장비는 메시지를 다시 패키징한 뒤, 다음 목적지로 메시지를 보내기 위해 다시 데이터 링크 계층으로 내려보낸다.

* 몇 개의 중간 장비를 거쳐온 메시지는 목적지에 도달한다.

![OSI 참조 모델에서 메시지 라우팅](http://ehpub.co.kr/wp-content/uploads/2016/06/%EA%B7%B8%EB%A6%BC-1.1-OSI-7%EA%B3%84%EC%B8%B5.png)

출처 : [언제나 휴일 프로그래머](http://ehpub.co.kr/tag/osi-7%EA%B3%84%EC%B8%B5/page/5/)